<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>

    <!-- client side proxy-->
    <bean id="client" class="org.logicblaze.lingo.jms.JmsProxyFactoryBean">
        <property name="serviceInterface" value="com.family168.lingo.UserCheck"/>
        <property name="connectionFactory" ref="connectionFactory"/>

        <!-- enable async -->
        <property name="metadataStrategy">
            <bean class="org.logicblaze.lingo.SimpleMetadataStrategy">
                <constructor-arg value="true"/>
            </bean>
        </property>

        <property name="destination" ref="destination"/>
        <property name="producerConfig" ref="producerConfig"/>
        <property name="requestor" ref="requestor"/>
    </bean>

    <bean id="requestor" class="com.family168.lingo.CallbackRequestorFactoryBean">
        <property name="producerConfig" ref="producerConfig"/>
        <property name="destination" ref="destination"/>
        <property name="connectionFactory" ref="connectionFactory"/>
    </bean>

    <bean id="connectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
        <property name="brokerURL" value="vm://localhost"/>
    </bean>

    <bean id="producerConfig" class="org.logicblaze.lingo.jms.JmsProducerConfig"/>

    <bean id="destination" class="org.apache.activemq.command.ActiveMQQueue">
        <constructor-arg index="0" value="org.apache.activemq.spring.Test.spring.embedded"/>
    </bean>

</beans>

